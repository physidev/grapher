<!DOCTYPE html>
<html>
	<head>
		<title>Grapher</title>
		<style>
			body {
				background:#BBBBBB;
				color:black;
				font-family:Helvetica;
			}
			#graph {
				background:#EEEEEE;
				border-width:10px;
				border-color:black;
				border-radius:5px;
			}
			#field, #funcDisplay {
				background:white;
				border:none;
				font-size:25px;
				color:black;
				width:370px;
				padding:15px;
			}
		</style>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/5.4.2/math.js"></script>
		<script>
			var scale, transX, transY, res;
			function init() {
				res = 1;
				scale = 40.0;
				transX = 0.0;
				transY = 0.0;
				update();
			}
			function update() {
				var canvas = document.getElementById('graph');
				if(canvas.getContext) {
					
					var c = canvas.getContext('2d');
					c.clearRect(0, 0, canvas.width, canvas.height);
					
					//draw gridlines
					c.strokeStyle = 'rgb(150,150,150)';
					c.lineWidth = 1;
					c.font = '18px Consolas';
					var limit = canvas.width / scale;
					for(var x=1; x < limit; x++) {
						
						//vertical gridlines
						c.beginPath();
						c.moveTo(scale*x, 0);
						c.lineTo(scale*x, canvas.height);
						c.closePath();
						c.stroke();
						c.fillText(x, scale*x, canvas.height - 2);
						
						//horizontal gridlines
						c.beginPath();
						c.moveTo(0, scale*x);
						c.lineTo(canvas.width, scale*x);
						c.closePath();
						c.stroke();
						c.fillText(x, 2, canvas.height - scale*x);
					}
					
					//get function
					var field = document.getElementById('field');
					var f = math.parse(field.value);
					document.getElementById('test').innerHTML += 'update: ' + field.value + '<hr>';
					
					//draw function
					c.strokeStyle = 'rgb(0,125,125)';
					c.lineWidth = 4;
					c.moveTo(0, canvas.height-f.eval({x: 0}));
					c.beginPath();
					for(var i=0; i<canvas.width; i+=res) { //draw each segment
						c.lineTo(i, canvas.height - scale * f.eval( {x: i / scale } ) );
					}
					c.stroke();
				}
			}
		</script>
	</head>
	
	<body onload="init();">
		<h1>2D Real Graph</h1>
		<canvas id="graph" width="400" height="400">
			Uh oh, you don't support canvas
        </canvas>
		
		<textarea row="1" onkeyup="update();" id="field">2x^2</textarea>
		<button onclick="update();">Enter!</button>
		<input type="range" min="0" max="5" value="0" class="slider" id="transXrange">
		<h2>History</h2>
		<div id="test"></div>
	</body>
	
	
</html>
